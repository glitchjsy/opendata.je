"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[4577],{77813:(e,t,a)=>{a.d(t,{Z:()=>ce});var l=a(96540);const n="popup_P_2S",c="popupName_aI73";function r(e){let{location:t}=e;return l.createElement("div",{className:n},l.createElement("p",{className:c},t.name))}const s="popup_5RKj",i="location_zJon",o="parish_OMz3",u="servicesName_d1ic",m="services_M2AE",p="notes_RNiN";var E=a(73925);function d(e){let{location:t}=e;return l.createElement("div",{className:s},l.createElement("p",{className:i},t.location),l.createElement("p",{className:o},l.createElement("strong",null,"Parish:")," ",t.parish),l.createElement("p",{className:u},"Services available:"),l.createElement("ul",{className:m},t.services.map((e=>l.createElement("li",null,(e=>{switch(e){case E.d.MIXED_TEXTILES:return"Mixed Textiles";case E.d.BATTERIES:return"Batteries";case E.d.CARDBOARD:return"Cardboard";case E.d.METAL_PACKAGING:return"Metal Packaging";case E.d.METAL_PACKAGING_DRINK_CANS:return"Drink Cans";case E.d.PAPER:return"Paper";case E.d.PLASTIC_BOTTLES:return"Plastic Bottles";case E.d.GLASS:return"Glass"}return"Unknown"})(e))))),t.notes&&l.createElement("p",{className:p},l.createElement("strong",null,"Notes:")," ",t.notes))}function g(e){let{location:t}=e;const[a,n]=(0,l.useState)("transparent"),[c,r]=(0,l.useState)(!1),s={border:"2px solid",borderColor:a,height:"25px"};return(0,l.useEffect)((()=>{null!==t.owner?.id&&(r(!0),"6060f60d-17a1-49c8-aa4a-c268721a806a"===t.owner.id&&n("red"),"62a13258-686c-456c-87f3-8a93ff735d35"===t.owner.id&&n("blue"),"52c49647-20f2-49f0-b9b6-a9ba49a13d03"===t.owner.id&&n("orange"))}),[t]),l.createElement("div",{style:c?s:{}},l.createElement("img",{src:"/img/maps/toilet.png",height:"20",width:"20"}))}function h(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/recycling.png",height:"20",width:"20"})}function N(e){let{location:t}=e;return l.createElement("img",{src:`/img/maps/eatsafe-${t.rating}.png`,height:"20",width:"20",style:{backgroundColor:"white",borderRadius:"50%"}})}const b="popup_YQy9",S="popupName_U7DZ",C="divider_Kw9x",A="facilitiesWrapper_vcKX",_="facilitiesTitle_QCMO",v="facility_z7_y",y="noFacilities_jJUI",T="popupParish_IEy8",f="ownedBy_yMNL";function k(e){let{location:t}=e;return l.createElement("div",{className:b},l.createElement("p",{className:S},t.name),l.createElement("p",{className:T},l.createElement("strong",null,"Parish:")," ",t.parish),l.createElement("div",{className:C}),l.createElement("p",{className:_},"Facilities available:"),t.facilities.length>0?l.createElement("ul",{className:A},t.facilities.map((e=>l.createElement("li",{className:v},(e=>{switch(e){case"BEACH_SHOWER":return"Beach Showers";case"DISABLED":return"Disabled Toilets";case"BABY_CHANGING":return"Baby Changing Station";case"GENDER_NEUTRAL":return"Gender Neutral Toilets"}return e})(e))))):l.createElement("p",{className:y},"(none)"),t.owner&&l.createElement("p",{className:f},"Owned by ",t.owner.name))}function R(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/defib.png",height:"20",width:"20"})}const D="popup_v_lW",w="address_t6cz",G="streetName_O8iS",O="parish_Rnx9",L="padNumberTitle_Eppp",I="padNumber_olf7",P="notes_RzPt";function B(e){let{location:t}=e;return l.createElement("div",{className:D},l.createElement("p",{className:w},t.location),l.createElement("p",{className:G},l.createElement("strong",null,"Street Name:")," ",t.streetName),l.createElement("p",{className:O},l.createElement("strong",null,"Parish:")," ",t.parish),l.createElement("p",{className:L},"Pad Number:"),l.createElement("p",{className:I},t.padNumber),t.notes&&l.createElement("p",{className:P},l.createElement("strong",null,"Notes:")," ",t.notes))}function x(e){let{location:t}=e;return l.createElement("img",{src:t.shelter?"/img/maps/bus-stop-yellow.png":"/img/maps/bus-stop.png",height:"20",width:"20"})}const M="popup_mXuE",V="name_U1xj",K="shelterAvailable_AYao",H="shelterUnavailable_k1PO",U="departuresTitle_GbpZ",Y="departuresError_hmKA",Z="departuresTable_ezey";var X=a(68272);function W(e){let{location:t}=e;const[a,n]=(0,l.useState)([]),[c,r]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{!async function(){try{const e=await fetch(`${X.y0}/v1/bus/stops/${t.stopNumber}`);if(!e.ok)return void r(!0);const a=await e.json();n(a?.results?.departures||[])}catch(e){r(!0),console.error(e)}}()}),[t]),l.createElement("div",{className:M},l.createElement("p",{className:V},t.name," (",t.stopNumber,")"),t.shelter?l.createElement("p",{className:K},"Shelter available"):l.createElement("p",{className:H},"Shelter not available"),l.createElement("p",{className:U},"Departures"),c?l.createElement("p",{className:Y},"An error has occurred"):l.createElement("table",{className:Z},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"ETA"),l.createElement("th",null,"Time"),l.createElement("th",null,"Route"),l.createElement("th",null,"Destination"))),l.createElement("tbody",null,a.map(((e,t)=>{return l.createElement("tr",{key:t},l.createElement("td",null,function(e){const t=new Date(e),a=new Date,l=Math.round((t.getTime()-a.getTime())/6e4);return l<=0?"<1 min":`${l} min`}(e.eta)),l.createElement("td",null,(a=e.eta,new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),l.createElement("td",null,e.serviceNumber),l.createElement("td",null,e.destination));var a})))))}function F(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/carpark.png",height:"20",width:"20"})}const z="popup_oaBH",j="name_reQ8",$="p_T80e",J="spacesDivider_i9_F",Q="owner_HSaR";var q=a(39197),ee=a(98027);function te(e){let{location:t}=e;return l.createElement("div",{className:z},l.createElement("p",{className:j},t.name),l.createElement("p",{className:$},l.createElement("strong",null,"Type:")," ",(()=>{switch(t.type){case"LONG_STAY":return"Long Stay";case"SHORT_STAY":return"Short Stay";case"UNKNOWN":return"Unknown"}return t.type})()),l.createElement("p",{className:$},l.createElement("strong",null,"Surface:")," ",(()=>{switch(t.surfaceType){case"TARMAC":return"Tarmac";case"CONCRETE":return"Concrete";case"GRAVEL":return"Gravel"}return t.surfaceType})()),t.payByPhoneCode&&l.createElement("p",{className:$},l.createElement("strong",null,"PayByPhone Code:")," ",t.payByPhoneCode),l.createElement("div",{className:J}),l.createElement("p",{className:$},l.createElement(q.Fih,null)," ",l.createElement("strong",null,"Spaces:")," ",t.spaces),l.createElement("p",{className:$},l.createElement(q.NC_,null)," ",l.createElement("strong",null,"Disabled Spaces:")," ",t.disabledSpaces),l.createElement("p",{className:$},l.createElement(q.d7Z,null)," ",l.createElement("strong",null,"Parent/Child Spaces:")," ",t.parentChildSpaces),l.createElement("p",{className:$},l.createElement(ee.tsv,null)," ",l.createElement("strong",null,"EV Spaces:")," ",t.electricChargingSpaces),l.createElement("div",{className:J}),l.createElement("p",{className:$},l.createElement("strong",null,"Multi Storey:")," ",t.multiStorey?"Yes":"No"),l.createElement("p",{className:$},l.createElement("strong",null,"Live Tracking Available:")," ",t.liveTrackingCode?"Yes":"No"),l.createElement("p",{className:Q},"Owned by ",t.owner?.name))}function ae(e){let{location:t}=e;const a=t.connectors.map((e=>e.currentStatus.operativeStatus));let n;return n=a.every((e=>"Available"!==e))?"/img/maps/ev-charger-red.png":a.some((e=>"Available"===e))&&a.some((e=>"Available"!==e))?"/img/maps/ev-charger-orange.png":"/img/maps/ev-charger.png",l.createElement("img",{src:n,height:"20",width:"20"})}const le={popup:"popup_CF01",name:"name_N4q9",address:"address_DX2G",parish:"parish_ivdt",connectors:"connectors_zlDC",connector:"connector_frUv",connectorStatusLine:"connectorStatusLine_rD8_",connectorsTitle:"connectorsTitle_jU9N",spacesDivider:"spacesDivider_NyPh"};function ne(e){let{location:t}=e;return l.createElement("div",{className:le.popup},l.createElement("p",{className:le.name},t.name),l.createElement("p",{className:le.address},l.createElement("strong",null,"Address:")," ",t.address),l.createElement("p",{className:le.parish},l.createElement("strong",null,"Parish:")," ",t.parish),l.createElement("div",{className:le.spacesDivider}),l.createElement("div",{className:le.connectorsTitle},"Connectors (",t.connectors.length,"):"),l.createElement("div",{className:le.connectors},t.connectors.map((e=>{const t=function(e){switch(e.toLowerCase()){case"available":return{text:"Available",color:"green"};case"charging":return{text:"Charging",color:"orange"};case"suspendedev":return{text:"Finished Charging / Blocked",color:"black"}}return{text:"Unknown",color:"gray"}}(e.currentStatus.operativeStatus);return l.createElement("div",{key:e.id,className:le.connector},l.createElement("div",{className:le.connectorStatusLine,style:{backgroundColor:t.color}}),l.createElement("div",null,l.createElement("p",{className:le.connectorType},l.createElement("strong",null,"Type:")," ",e.type," (",e.currentType,")"),l.createElement("p",{className:le.connectorPower},l.createElement("strong",null,"Max Power:")," ",e.maxKw," kW"),l.createElement("p",{className:le.connectorStatus},l.createElement("strong",null,"Status:")," ",t.text)))}))))}const ce={eatsafe:{label:"Eatsafe ratings",icon:e=>l.createElement(N,{location:e}),popup:e=>l.createElement(r,{location:e}),fetchData:()=>re("eatsafe")},recycling:{label:"Recycling centres",icon:e=>l.createElement(h,{location:e}),popup:e=>l.createElement(d,{location:e}),fetchData:()=>re("recycling")},toilet:{label:"Public toilets",icon:e=>l.createElement(g,{location:e}),popup:e=>l.createElement(k,{location:e}),fetchData:()=>re("toilets")},defib:{label:"Defibrillators",icon:e=>l.createElement(R,{location:e}),popup:e=>l.createElement(B,{location:e}),fetchData:()=>re("defibrillators")},busStop:{label:"Bus stops",icon:e=>l.createElement(x,{location:e}),popup:e=>l.createElement(W,{location:e}),fetchData:()=>re("bus/stops")},carpark:{label:"Car parks",icon:e=>l.createElement(F,{location:e}),popup:e=>l.createElement(te,{location:e}),fetchData:()=>re("carparks")},evCharger:{label:"EV chargers",icon:e=>l.createElement(ae,{location:e}),popup:e=>l.createElement(ne,{location:e}),fetchData:()=>re("ev-stations")}};async function re(e){try{const t=await fetch(`${X.y0}/v1/${e}`);if(!t.ok)throw new Error("Response was not ok");const a=await t.json();return a?.results||a}catch(t){throw console.error(`Failed to fetch data for route ${e}: ${t.message}`),t}}},73925:(e,t,a)=>{a.d(t,{d:()=>l});let l=function(e){return e.BATTERIES="BATTERIES",e.CARDBOARD="CARDBOARD",e.METAL_PACKAGING="METAL_PACKAGING",e.METAL_PACKAGING_DRINK_CANS="METAL_PACKAGING_DRINK_CANS",e.MIXED_TEXTILES="MIXED_TEXTILES",e.PAPER="PAPER",e.PLASTIC_BOTTLES="PLASTIC_BOTTLES",e.GLASS="GLASS",e}({})},50228:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(58168),n=a(96540),c=a(47330),r=a(77813),s=a(15549);const i={grid:"grid__dFs",drawer:"drawer_Y40b",mobileToggle:"mobileToggle_vli1",drawerClose:"drawerClose_dVkU",drawerOpen:"drawerOpen_IeMG",error:"error_pIoi"},o={layerControl:"layerControl_m8gq",subOptions:"subOptions_b7XZ",subOptionOptions:"subOptionOptions_xGmD",subOptionSectionTitle:"subOptionSectionTitle_AFFO",subOptionGroup:"subOptionGroup_xlG5",checkmark:"checkmark_VkFL",checkboxGroup:"checkboxGroup_Tg19"};var u=a(20053);function m(e){return n.createElement("div",{className:o.layerControl},n.createElement("label",{className:o.checkboxGroup},e.label,n.createElement("input",{type:"checkbox",checked:e.isVisible,onChange:e.toggleVisibility}),n.createElement("span",{className:o.checkmark})),e.isVisible&&e.subOptions?.length>0&&n.createElement("div",{className:o.subOptions},e.subOptions.map((e=>n.createElement("div",{className:o.subOptionSection},n.createElement("p",{className:o.subOptionSectionTitle},e.title),n.createElement("div",{className:o.subOptionOptions},e.options.map((e=>n.createElement("label",{key:e.value,className:(0,u.A)(o.checkboxGroup,o.subOptionGroup)},e.label,n.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:e.toggle}),n.createElement("span",{className:o.checkmark}))))))))))}var p=a(68272);let E=function(e){return e.SHORT_STAY="SHORT_STAY",e.LONG_STAY="LONG_STAY",e.UNKNOWN="UNKNOWN",e}({}),d=function(e){return e.TARMAC="TARMAC",e.CONCRETE="CONCRETE",e.GRAVEL="GRAVEL",e}({}),g=function(e){return e.GENDER_NEUTRAL="GENDER_NEUTRAL",e.BEACH_SHOWER="BEACH_SHOWER",e.BABY_CHANGING="BABY_CHANGING",e.DISABLED="DISABLED",e}({});var h=a(73925);function N(){const[e,t]=(0,n.useState)({width:"100%",height:"80vh",latitude:49.214198,longitude:-2.132497,zoom:11}),[a,o]=(0,n.useState)(null),[u,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[A,_]=(0,n.useState)(!0),[v,y]=(0,n.useState)(!0),[T,f]=(0,n.useState)(!0),[k,R]=(0,n.useState)(!0),[D,w]=(0,n.useState)(!0),[G,O]=(0,n.useState)(!0),[L,I]=(0,n.useState)(!1),[P,B]=(0,n.useState)(!0),[x,M]=(0,n.useState)(!0),[V,K]=(0,n.useState)(!0),[H,U]=(0,n.useState)(!0),[Y,Z]=(0,n.useState)(!0),[X,W]=(0,n.useState)(!1),[F,z]=(0,n.useState)(!0),[j,$]=(0,n.useState)(!0),[J,Q]=(0,n.useState)(!0),[q,ee]=(0,n.useState)(!0),[te,ae]=(0,n.useState)(!0),[le,ne]=(0,n.useState)(!0),[ce,re]=(0,n.useState)(!0),[se,ie]=(0,n.useState)(!0),[oe,ue]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(!1),[Ee,de]=(0,n.useState)(!1),[ge,he]=(0,n.useState)(!1),[Ne,be]=(0,n.useState)([]),[Se,Ce]=(0,n.useState)([]),[Ae,_e]=(0,n.useState)([]),[ve,ye]=(0,n.useState)([]),[Te,fe]=(0,n.useState)([]),[ke,Re]=(0,n.useState)([]),[De,we]=(0,n.useState)([]);(0,n.useEffect)((()=>{r.Z.carpark.fetchData().then(be),r.Z.toilet.fetchData().then(Ce),r.Z.busStop.fetchData().then(_e),r.Z.recycling.fetchData().then(ye),r.Z.defib.fetchData().then(fe),r.Z.eatsafe.fetchData().then(Re),r.Z.evCharger.fetchData().then(we)}),[]);return n.createElement(s.A,{title:"Map",description:"Interactive map example"},n.createElement("main",null,n.createElement("div",{className:i.grid},n.createElement("div",{className:`${i.drawer} ${u?i.drawerOpen:""}`},n.createElement("button",{className:i.drawerClose,onClick:()=>N(!1)},"Close \u2715"),n.createElement(m,{label:"Car parks",isVisible:S,toggleVisibility:()=>C(!S),subOptions:[{title:"Type",options:[{label:"Long Stay",value:"includeLongStayCarparks",isChecked:A,toggle:()=>_(!A)},{label:"Short Stay",value:"includeShortStayCarparks",isChecked:v,toggle:()=>y(!v)},{label:"Unknown",value:"includeUnknownCarparks",isChecked:T,toggle:()=>f(!T)}]},{title:"Surface",options:[{label:"Tarmac",value:"includeTarmacCarparks",isChecked:D,toggle:()=>w(!D)},{label:"Concrete",value:"includeConcreteCarparks",isChecked:G,toggle:()=>O(!G)},{label:"Gravel",value:"includeGravelCarparks",isChecked:k,toggle:()=>R(!k)}]}]}),n.createElement(m,{label:"Public toilets",isVisible:L,toggleVisibility:()=>I(!L),subOptions:[{title:"Facilities",options:[{label:"Gender Neutral",value:"includeGenderNeutralToilets",isChecked:P,toggle:()=>B(!P)},{label:"Beach Showers",value:"includeBeachShowerToilets",isChecked:x,toggle:()=>M(!x)},{label:"Baby Changing",value:"includeBabyChangingToilets",isChecked:V,toggle:()=>K(!V)},{label:"Disabled",value:"includeDisabledToilets",isChecked:H,toggle:()=>U(!H)},{label:"None",value:"includeNoneToilets",isChecked:Y,toggle:()=>Z(!Y)}]}]}),n.createElement(m,{label:"Bus stops",isVisible:oe,toggleVisibility:()=>ue(!oe)}),n.createElement(m,{label:"Recycling centres",isVisible:X,toggleVisibility:()=>W(!X),subOptions:[{title:"Services",options:[{label:"Mixed Textiles",value:"includeMixedTextilesRecycling",isChecked:F,toggle:()=>z(!F)},{label:"Batteries",value:"includeBatteriesRecycling",isChecked:j,toggle:()=>$(!j)},{label:"Cardboard",value:"includeCardboardRecycling",isChecked:J,toggle:()=>Q(!J)},{label:"Metal Packaging",value:"includeMetalPackagingRecycling",isChecked:q,toggle:()=>ee(!q)},{label:"Drink Cans",value:"includeDrinkCansRecycling",isChecked:te,toggle:()=>ae(!te)},{label:"Paper",value:"includePaperRecycling",isChecked:le,toggle:()=>ne(!le)},{label:"Plastic Bottles",value:"includePlasticBottlesRecycling",isChecked:ce,toggle:()=>re(!ce)},{label:"Glass",value:"includeGlassRecycling",isChecked:se,toggle:()=>ie(!se)}]}]}),n.createElement(m,{label:"Defibrillators",isVisible:me,toggleVisibility:()=>pe(!me)}),n.createElement(m,{label:"Eat safe ratings",isVisible:Ee,toggleVisibility:()=>de(!Ee)}),n.createElement(m,{label:"EV chargers",isVisible:ge,toggleVisibility:()=>he(!ge)})),n.createElement(c.Ay,(0,l.A)({},e,{mapStyle:"mapbox://styles/mapbox/streets-v11",onViewportChange:e=>t(e),mapboxApiAccessToken:p.Rb}),n.createElement(c.ov,{showZoom:!0,style:{padding:"20px",zIndex:100}}),n.createElement("button",{className:i.mobileToggle,onClick:()=>N(!0)},"\u2630"),S&&Ne.filter((e=>(A&&e.type===E.LONG_STAY||v&&e.type===E.SHORT_STAY||T&&e.type===E.UNKNOWN)&&(k&&e.surfaceType===d.GRAVEL||D&&e.surfaceType===d.TARMAC||G&&e.surfaceType===d.CONCRETE))).map(((e,t)=>n.createElement(b,{item:e,type:"carpark",onSelect:o}))),L&&Se.filter((e=>!(!Y&&0===e.facilities.length||!P&&e.facilities.includes(g.GENDER_NEUTRAL)||!x&&e.facilities.includes(g.BEACH_SHOWER)||!V&&e.facilities.includes(g.BABY_CHANGING)||!H&&e.facilities.includes(g.DISABLED)))).map(((e,t)=>n.createElement(b,{item:e,type:"toilet",onSelect:o}))),oe&&Ae.map(((e,t)=>n.createElement(b,{item:e,type:"busStop",onSelect:o}))),X&&ve.filter((e=>!(!F&&e.services.includes(h.d.MIXED_TEXTILES)||!j&&e.services.includes(h.d.BATTERIES)||!J&&e.services.includes(h.d.CARDBOARD)||!q&&e.services.includes(h.d.METAL_PACKAGING)||!te&&e.services.includes(h.d.METAL_PACKAGING_DRINK_CANS)||!le&&e.services.includes(h.d.PAPER)||!ce&&e.services.includes(h.d.PLASTIC_BOTTLES)||!se&&e.services.includes(h.d.GLASS)))).map(((e,t)=>n.createElement(b,{item:e,type:"recycling",onSelect:o}))),me&&Te.map(((e,t)=>n.createElement(b,{item:e,type:"defib",onSelect:o}))),Ee&&ke.map(((e,t)=>n.createElement(b,{item:e,type:"eatsafe",onSelect:o}))),ge&&De.map(((e,t)=>n.createElement(b,{item:e,type:"evCharger",onSelect:o}))),a&&n.createElement(c.zD,{latitude:Number(a.item.latitude),longitude:Number(a.item.longitude),onClose:()=>o(null),closeOnClick:!1,anchor:"top"},r.Z[a.type].popup(a.item))))))}function b(e){let{item:t,type:a,onSelect:l}=e;return n.createElement(c.pH,{latitude:Number(t.latitude),longitude:Number(t.longitude)},n.createElement("div",{onClick:()=>l({item:t,type:a}),style:{cursor:"pointer"}},r.Z[a].icon(t)))}},68272:e=>{e.exports=JSON.parse('{"Rb":"pk.eyJ1IjoiZ2xpdGNoanN5IiwiYSI6ImNtOG9iZm01aTAwcWQyanM5NHN6NXRsemcifQ.GCQil4JVppCX_dIgJE1tMA","y0":"https://api.opendata.je","qu":"6LeMWScsAAAAAP-KiCNYxmSiz_9rdiM7xlqphI6R"}')}}]);