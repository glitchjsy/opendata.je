"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[7652],{46325:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(58168),r=a(96540);function l(e){let{gap:t,direction:a="row",children:l,...c}=e;return r.createElement("div",(0,n.A)({style:{display:"flex",gap:t,flexDirection:a}},c),l)}},26414:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(58168),r=a(96540),l=a(95293),c=a(20053);const o={button:"button_h_xa",smallerPadding:"smallerPadding_avZr",primary:"primary_UmVR",secondary:"secondary_amWm",danger:"danger_jN6b"};function i(e){let{children:t,variant:a="primary",useSmallerPadding:i,className:s,...m}=e;const{colorMode:d}=(0,l.G)();return r.createElement("button",(0,n.A)({className:(0,c.A)(o.button,o[a],{[o.smallerPadding]:i},s),"data-theme":d},m),t)}},4334:(e,t,a)=>{a.d(t,{b:()=>i});var n=a(96540),r=a(95293);const l={tableWrapper:"tableWrapper_GFu2",table:"table_L05C"};var c=a(26414),o=a(39197);function i(e){let{columns:t,data:a,onReload:i}=e;const{colorMode:s}=(0,r.G)();return n.createElement("div",{className:l.tableWrapper,"data-theme":s},n.createElement("table",{className:l.table},n.createElement("thead",null,n.createElement("tr",null,t.map((e=>n.createElement("th",{key:e.key},e.header))))),n.createElement("tbody",null,a?.map((e=>n.createElement("tr",{key:e.id},t.map((t=>n.createElement("td",{key:t.key},t.render?t.render(e):e[t.key])))))))),i&&n.createElement(c.A,{variant:"secondary",useSmallerPadding:!0,onClick:()=>i()},n.createElement(o.BVQ,{style:{marginRight:"6px"}})," Reload"))}},45591:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(96540);const r={formGroup:"formGroup_YCak",helpText:"helpText_f1zI"};function l(e){return n.createElement("div",{className:r.formGroup},n.createElement("label",null,e.label),e.children,e.helpText&&n.createElement("span",{className:r.helpText},e.helpText))}},30070:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(58168),r=a(96540);const l={input:"input_kH4F"};function c(e){return r.createElement("input",(0,n.A)({className:l.input},e))}},39063:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(96540),r=a(20312),l=a.n(r);const c={overlay:"overlay_hsb3",content:"content_L2fA",larger:"larger_g68J",close:"close_fKGm",title:"title__v93",body:"body_gKmW"};var o=a(20053);function i(e){let{isOpen:t,onClose:a,title:r,larger:i,children:s}=e;return n.createElement(l(),{isOpen:t,onRequestClose:a,overlayClassName:c.overlay,className:(0,o.A)(c.content,i?c.larger:"")},n.createElement("button",{className:c.close,onClick:a},"\xd7"),r&&n.createElement("h2",{className:c.title},r),n.createElement("div",{className:c.body},s))}},40106:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(15549),r=a(96540),l=a(68272);const c={header:"header_QzzO",section:"section_K2t2",sectionTitle:"sectionTitle_gAHY",sectionContent:"sectionContent_YNR1",profileSettingsGrid:"profileSettingsGrid_cNOP"},o={wrapper:"wrapper_cFXa",icon:"icon_o2Yx",title:"title_xzzm",description:"description_wWCH",children:"children_JfZ5"};function i(e){let{icon:t,title:a,description:n,children:l}=e;return r.createElement("div",{className:o.wrapper},r.createElement("div",{className:o.icon},t),r.createElement("div",{className:o.title},a),r.createElement("div",{className:o.description},n),r.createElement("div",{className:o.children},l))}var s=a(39197),m=a(26414),d=a(39063),u=a(45591),y=a(99571),p=a(46325),h=a(4334),E=a(30070);function g(){const[e,t]=(0,r.useState)(""),[a,o]=(0,r.useState)([]),[d,g]=(0,r.useState)(!1),[v,k]=(0,r.useState)(!1),[_,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{w(),N()}),[]);const w=async()=>{try{const e=await fetch(`${l.y}/me/session`,{credentials:"include"});if(e.ok){const a=await e.json();a&&0!==Object.keys(a).length?(k(!0),t(a?.user?.email),g(Boolean(a?.user?.siteAdmin))):window.location.href="/login"}else(0,y.oR)("Error fetching session",{type:"error"}),window.location.href="/login"}catch(e){(0,y.oR)(e.message,{type:"error"}),console.error("Error fetching session",e),window.location.href="/login"}},N=async()=>{try{const e=await fetch(`${l.y}/me/api-keys`,{credentials:"include"});if(e.ok){const t=await e.json();o(t?.results)}else(0,y.oR)("Failed to fetch API Keys",{type:"error"})}catch(e){(0,y.oR)(e.message,{type:"error"}),console.error("Error fetching API Keys",e)}};return v?r.createElement(n.A,{title:"Account"},r.createElement("div",{className:c.header},r.createElement("div",{className:"container container-fluid margin-vert--lg"},r.createElement("h1",null,"My Account"),r.createElement("p",{style:{fontSize:"18px"}},"Manage your account settings here."))),r.createElement("div",{className:"container container-fluid margin-vert--lg"},r.createElement(f,{title:"Profile & Settings"},r.createElement("div",{className:c.profileSettingsGrid},r.createElement(u.A,{label:"Email",helpText:"Email editing is currently being worked on"},r.createElement(E.A,{type:"email",value:e,disabled:!0,maxLength:200,onChange:e=>t(e.target.value)}))),r.createElement(m.A,null,"Update")),r.createElement(f,{title:"API Keys"},0===a.length?r.createElement(i,{icon:r.createElement(s.pXu,null),title:"No API Keys",description:"Create a new API key below"},r.createElement(m.A,{onClick:()=>b(!0)},"Create API key")):r.createElement(r.Fragment,null,r.createElement(m.A,{onClick:()=>b(!0),style:{marginBottom:"20px"}},"Create API key"),r.createElement(h.b,{data:a,columns:[{key:"summary",header:"Label"},{key:"createdAt",header:"Created",render:e=>new Date(e.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})},{key:"token",header:"Key"},{key:"totalUses",header:"Uses"},{key:"actions",header:"",render:e=>r.createElement(p.A,{gap:"6px"},r.createElement(m.A,{useSmallerPadding:!0,variant:"danger",onClick:()=>(async e=>{try{confirm("Are you sure you want to delete this API key?")&&(await fetch(`${l.y}/me/api-keys/${e.id}`,{method:"DELETE",credentials:"include"}),window.location.reload())}catch(t){console.error("Error deleting API key:",t)}})(e)},r.createElement(s.G02,null)))}]})))),r.createElement(A,{isOpen:_,onClose:()=>b(!1)})):r.createElement("div",null,"Loading...")}function f(e){let{title:t,children:a}=e;return r.createElement("div",{className:c.section},r.createElement("h3",{className:c.sectionTitle},t),r.createElement("div",{className:c.sectionContent},a))}function A(e){let{isOpen:t,onClose:a}=e;const[n,c]=(0,r.useState)("");(0,r.useEffect)((()=>{c("")}),[t]);return r.createElement(d.A,{isOpen:t,onClose:a,title:"Create API Key"},r.createElement(u.A,{label:"Label",helpText:"A short description of this API key to help you identify it in the future"},r.createElement(E.A,{type:"text",value:n,maxLength:200,onChange:e=>c(e.target.value)})),r.createElement(m.A,{variant:"secondary",onClick:()=>(async()=>{try{(await fetch(`${l.y}/me/api-keys/new`,{method:"POST",credentials:"include",body:JSON.stringify({summary:n})})).ok?(a(),window.location.reload()):(0,y.oR)("Failed to create API key",{type:"error"})}catch(e){console.error("Error creating API key:",e)}})()},"Create"))}}}]);